{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "definitions": {
    "positiveNumber": {
      "type": "number",
      "minimum": 0
    }
  },

  "type": "object",
  "additionalProperties": false,
  "required": ["otId","deprecated","metadata","parameters","cornerOffsetFromSlot","ordering","dimensions","wells"],
  "properties": {
    "otId": {
      "description": "Unique internal ID generated using UUID",
      "type": "string"
    },
    "deprecated": {
      "description": "Flag specifying whether a labware is deprecated or not",
      "type": "boolean"
    },
    "metadata": {
      "type": "object",
      "description": "Properties used for searchability",
      "additionalProperties": false,
      "required": ["name", "displayCategory"],
      "properties": {
        "name": {
          "description": "Easy to remember name of labware",
          "type": "string"
        },
        "displayCategory": {
          "description": "Label used in UI to categorize labware",
          "type": "string"
        },
        "displayLengthUnits": {
          "type": "string"
        },
        "displayVolumeUnits": {
          "type": "string"
        }
      }
    },
    "vendor": {
      "type": "object",
      "description": "Also for searchability, so that users know exactly which labware this was modeled off",
      "additionalProperties": false,
      "properties": {
        "sku": {
          "type": "string"
        },
        "vendor": {
          "type": "string"
        }
      }

    },
    "parameters": {
      "type": "object",
      "description": "Internal describers used to determine pipette movement to labware",
      "additionalProperties": false,
      "required": ["format", "isTiprack"],
      "properties": {
        "format": {
          "description": "Property to determine compatibility with multichannel pipette",
          "type": "string"
        },
        "isTiprack": {
          "description": "Flag marking whether a container is a tiprack or not",
          "type": "boolean"
        },
        "tipLength": {
          "description": "Required if container is tiprack",
          "$ref": "#/definitions/positiveNumber"
        }
      }

    },
    "ordering": {
      "type": "array",
      "description": "Generated array that keeps track of how wells should be ordered in a container",
      "items": {
        "type": "array",
        "items": {
          "type": "string"
        }
      }
    },
    "cornerOffsetFromSlot": {
      "type": "object",
      "additionalProperties": false,
      "description": "XYZ values from top left corner of container to well A1",
      "required": ["x", "y", "z"],
      "properties": {
        "x": {"type": "number"},
        "y": {"type": "number"},
        "z": {"type": "number"}
      }

    },
    "dimensions": {
      "type": "object",
      "additionalProperties": false,
      "description": "Outer dimensions of a container",
      "required": ["overallWidth", "overallHeight", "overallLength"],
      "properties": {
        "overallWidth": {
          "$ref": "#/definitions/positiveNumber"
        },
        "overallHeight": {
          "$ref": "#/definitions/positiveNumber"
        },
        "overallLength": {
          "$ref": "#/definitions/positiveNumber"
        }
      }

    },
    "wells": {
      "type": "object",
      "description": "Unordered object of well objects with calculated XYZ",
      "patternProperties": {
        "['A' - 'Z'][*]": {
          "type": "object",
          "additionalProperties": false,
          "required": ["depth", "x", "y", "z", "shape"],
          "oneOf": [
            {"required": ["width", "length"]},
            {"required": ["diameter"]}
          ],
          "not": {"anyOf": [
                    {"required": ["diameter", "width"]},
                    {"required": ["diameter", "length"]}
          ]},
          "properties": {
            "depth": {"$ref": "#/definitions/positiveNumber"},
            "x": {"$ref": "#/definitions/positiveNumber"},
            "y": {"$ref": "#/definitions/positiveNumber"},
            "z": {"$ref": "#/definitions/positiveNumber"},
            "totalLiquidVolume": {"$ref": "#/definitions/positiveNumber"},
            "width": {"$ref": "#/definitions/positiveNumber"},
            "length": {"$ref": "#/definitions/positiveNumber"},
            "diameter": {"$ref": "#/definitions/positiveNumber"},
            "shape": {
              "type": "string",
              "enum": ["rectangular", "circular"]
            }

          }
        }
      }

    }

  }

}
